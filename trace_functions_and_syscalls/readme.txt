patch tested on socat code 1.7.3.1
0001-trace-all-functions.patch  0002-trace-all-functions-and-syscalls.patch  

original example code
trace_functions_and_syscalls.c
